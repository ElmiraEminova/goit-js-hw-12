{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createMarkup = images => {\n  return images.reduce(\n    (\n      html,\n      { tags, webformatURL, largeImageURL, likes, views, comments, downloads }\n    ) => {\n      return (\n        html +\n        `<li class=\"photo-container\">\n    <a href=${largeImageURL} class=\"card-link js-card-link\">\n        <img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\" >\n    </a>\n    <div class=\"info\">\n        <div class=\"info-item\">\n            <h3 class=\"title\">Likes</h3>\n            <p class=\"info\">${likes}</p>\n        </div>\n        <div class=\"info-item\">\n            <h3 class=\"title\">Views</h3>\n            <p class=\"info\">${views}</p>\n        </div>\n        <div class=\"info-item\">\n            <h3 class=\"title\">Comments</h3>\n            <p class=\"info\">${comments}</p>\n        </div>\n        <div class=\"info-item\">\n            <h3 class=\"title\">Downloads</h3>\n            <p class=\"info\">${downloads}</p>\n        </div>\n    </div>\n</li>\n    `\n      );\n    },\n    ''\n  );\n};","const API_KEY = '44000737-c23aa9eb5fa4f7b392d266f4c';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const PER_PAGE = 15;\n\nimport axios from 'axios';\naxios.defaults.baseURL = BASE_URL;\n\nexport const fetchImg = async (searchImage, newCurrentPage = 1) => {\n  const response = await axios.get('', {\n    params: {\n      key: API_KEY,\n      q: searchImage,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: newCurrentPage,\n      per_page: PER_PAGE,\n    },\n  });\n\n  return response.data;\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { createMarkup } from './js/render-functions';\nimport { fetchImg, PER_PAGE } from './js/pixabay-api';\n\nconst imgEl = document.querySelector('.gallery');\nconst searchForm = document.querySelector('.search-form');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.js-load-more');\n\nlet newCurrentPage = 1;\nlet searchQuery = '';\nlet totalPages = 0;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionsDelay: 250,\n});\n\nconst onSearch = async (event) => {\n  event.preventDefault();\n\n  searchQuery = event.target.elements.searchKeyword.value.trim();\n  if (searchQuery === '') {\n    imgEl.innerHTML = '';\n    event.target.reset();\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n    return;\n  }\n\n  imgEl.innerHTML = '';\n  loadMoreBtn.classList.add('d-none');\n  loaderEl.classList.remove('is-hidden');\n\n  try {\n    newCurrentPage = 1;\n    const imagesData = await fetchImg(searchQuery, newCurrentPage);\n    if (imagesData.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      loaderEl.classList.add('is-hidden');\n      return;\n    }\n\n    imgEl.innerHTML = createMarkup(imagesData.hits);\n    totalPages = Math.ceil(imagesData.totalHits / PER_PAGE);\n    if (newCurrentPage < totalPages) {\n      loadMoreBtn.classList.remove('d-none');\n    } else {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n\n    lightbox.refresh();\n\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      message: 'An error occurred while fetching the images. Please try again later!',\n    });\n  } finally {\n    loaderEl.classList.add('is-hidden');\n  }\n};\n\nconst clickLoadMore = async () => {\n  newCurrentPage += 1;\n  loaderEl.classList.remove('is-hidden');\n\n  try {\n    const imagesData = await fetchImg(searchQuery, newCurrentPage);\n    imgEl.insertAdjacentHTML('beforeend', createMarkup(imagesData.hits));\n    lightbox.refresh();\n\n\n    const { height: cardHeight } = imgEl.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n       top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (newCurrentPage >= totalPages) {\n      loadMoreBtn.classList.add('d-none');\n    }\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      message: 'An error occurred while fetching the images. Please try again later!',\n    });\n  } finally {\n    loaderEl.classList.add('is-hidden');\n  }\n};\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', clickLoadMore);"],"names":["createMarkup","images","html","tags","webformatURL","largeImageURL","likes","views","comments","downloads","API_KEY","BASE_URL","PER_PAGE","axios","fetchImg","searchImage","newCurrentPage","imgEl","searchForm","loaderEl","loadMoreBtn","searchQuery","totalPages","lightbox","SimpleLightbox","onSearch","event","iziToast","imagesData","error","clickLoadMore","cardHeight"],"mappings":"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"}